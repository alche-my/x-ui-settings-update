# –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º Dokodemo-door –º–æ—Å—Ç–∞

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ—à–µ–Ω–∏—è —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º, –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–º —Å–∫—Ä–∏–ø—Ç–æ–º.

## üîç –ü—Ä–æ–±–ª–µ–º–∞: DNS –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

**–°–∏–º–ø—Ç–æ–º:**
```
‚ö† DNS –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
```

**–†–µ—à–µ–Ω–∏–µ:**

–°–∫—Ä–∏–ø—Ç `setup-dokodemo-bridge.sh` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç DNS –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ. –ï—Å–ª–∏ DNS –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ x-ui
systemctl stop x-ui

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
nano /usr/local/x-ui/bin/config.json
```

–î–æ–±–∞–≤—å—Ç–µ —Å–µ–∫—Ü–∏—é `dns` –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞ (–ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã–≤–∞—é—â–µ–π —Ñ–∏–≥—É—Ä–Ω–æ–π —Å–∫–æ–±–∫–∏):

```json
{
  "dns": {
    "servers": [
      "1.1.1.1",
      "8.8.8.8",
      "https://dns.google/dns-query"
    ],
    "queryStrategy": "UseIP",
    "tag": "dns_inbound"
  },
  "inbounds": [
    ...
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ x-ui:
```bash
systemctl start x-ui
```

---

## üîç –ü—Ä–æ–±–ª–µ–º–∞: TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ —Ñ–∏–Ω—Å–∫–æ–º—É —Å–µ—Ä–≤–µ—Ä—É –Ω–µ —É–¥–∞–ª–æ—Å—å

**–°–∏–º–ø—Ç–æ–º:**
```
‚úì    Ping –∫ 91.103.140.9 —É—Å–ø–µ—à–µ–Ω
‚úó    TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ 91.103.140.9:443 –Ω–µ —É–¥–∞–ª–æ—Å—å
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

### 1. –ü–æ—Ä—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –Ω–∞ —Ñ–∏–Ω—Å–∫–æ–º —Å–µ—Ä–≤–µ—Ä–µ

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –° —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ VPS –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è
telnet 91.103.140.9 443
# –∏–ª–∏
nc -zv 91.103.140.9 443
```

**–†–µ—à–µ–Ω–∏–µ:**

–ù–∞ —Ñ–∏–Ω—Å–∫–æ–º —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
# –°–ª—É—à–∞–µ—Ç—Å—è –ª–∏ –ø–æ—Ä—Ç?
netstat -tlnp | grep 443

# –û—Ç–∫—Ä—ã—Ç –ª–∏ –ø–æ—Ä—Ç –≤ firewall?
ufw status
# –∏–ª–∏
firewall-cmd --list-all

# –ï—Å–ª–∏ –ø–æ—Ä—Ç –∑–∞–∫—Ä—ã—Ç, –æ—Ç–∫—Ä–æ–π—Ç–µ –µ–≥–æ
ufw allow 443/tcp
# –∏–ª–∏
firewall-cmd --permanent --add-port=443/tcp
firewall-cmd --reload
```

### 2. 3x-ui –Ω–∞ —Ñ–∏–Ω—Å–∫–æ–º —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ –∑–∞–ø—É—â–µ–Ω

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ñ–∏–Ω—Å–∫–æ–º —Å–µ—Ä–≤–µ—Ä–µ:**
```bash
systemctl status x-ui
```

**–†–µ—à–µ–Ω–∏–µ:**
```bash
systemctl start x-ui
systemctl enable x-ui
```

### 3. Inbound –Ω–∞ —Ñ–∏–Ω—Å–∫–æ–º —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞ —Ñ–∏–Ω—Å–∫–æ–º —Å–µ—Ä–≤–µ—Ä–µ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π VLESS/Reality inbound –Ω–∞ –ø–æ—Ä—Ç—É 443.

–ó–∞–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å 3x-ui —Ñ–∏–Ω—Å–∫–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ inbound'—ã.

---

## üîç –ü—Ä–æ–±–ª–µ–º–∞: sqlite3 –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

**–°–∏–º–ø—Ç–æ–º:**
```
‚ö† sqlite3 –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –ë–î
```

**–í–ª–∏—è–Ω–∏–µ:** –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö x-ui.

**–†–µ—à–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**

```bash
# Ubuntu/Debian
apt-get update && apt-get install -y sqlite3

# CentOS/RHEL
yum install -y sqlite
```

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É —Å–Ω–æ–≤–∞.

---

## üîç –ü—Ä–æ–±–ª–µ–º–∞: –ö–ª–∏–µ–Ω—Ç –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ —à–∞–≥–∞–º:**

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ –º–æ—Å—Ç–∞

–° –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ (–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞):
```bash
telnet 84.38.183.228 443
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall –Ω–∞ —Ä–æ—Å—Å–∏–π—Å–∫–æ–º VPS

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª–∞
iptables -L -n | grep 443

# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ufw
ufw status

# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è firewalld
firewall-cmd --list-all
```

**–û—Ç–∫—Ä–æ–π—Ç–µ –Ω—É–∂–Ω—ã–µ –ø–æ—Ä—Ç—ã:**
```bash
# ufw
ufw allow 443/tcp
ufw allow 8443/tcp
ufw allow 2053/tcp
ufw allow 4443/tcp

# firewalld
firewall-cmd --permanent --add-port=443/tcp
firewall-cmd --permanent --add-port=8443/tcp
firewall-cmd --permanent --add-port=2053/tcp
firewall-cmd --permanent --add-port=4443/tcp
firewall-cmd --reload
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∫–ª–∏–µ–Ω—Ç–∞

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –∫–ª–∏–µ–Ω—Ç–µ —É–∫–∞–∑–∞–Ω:
- **IP:** IP —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ –º–æ—Å—Ç–∞ (84.38.183.228)
- **–ü–æ—Ä—Ç:** –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç (443, 8443, 2053, –∏–ª–∏ 4443)
- **UUID, Flow, Security:** –¢–µ –∂–µ, —á—Ç–æ –±—ã–ª–∏ –Ω–∞ —Ñ–∏–Ω—Å–∫–æ–º —Å–µ—Ä–≤–µ—Ä–µ

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ x-ui

```bash
# –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
journalctl -u x-ui -f

# –ò–ª–∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏
journalctl -u x-ui -n 100
```

---

## üîç –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–ª–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏:

```bash
bash <(curl -Ls https://raw.githubusercontent.com/alche-my/x-ui-settings-update/claude/dokodemo-bridge-setup-script-011CUbPMnjnzUTsLiZV9wDhf/diagnose-dokodemo-bridge.sh)
```

---

## üÜò –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ

1. **–°–æ–±–µ—Ä–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:**
   ```bash
   # –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤—ã–≤–æ–¥
   bash <(curl -Ls https://raw.githubusercontent.com/alche-my/x-ui-settings-update/claude/dokodemo-bridge-setup-script-011CUbPMnjnzUTsLiZV9wDhf/diagnose-dokodemo-bridge.sh) > diagnostic-report.txt

   # –°–æ–±–µ—Ä–∏—Ç–µ –ª–æ–≥–∏
   journalctl -u x-ui -n 200 > xui-logs.txt
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ Issue:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ: https://github.com/alche-my/x-ui-settings-update/issues
   - –ü—Ä–∏–ª–æ–∂–∏—Ç–µ diagnostic-report.txt –∏ xui-logs.txt
   - –û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –∏ —á—Ç–æ —É–∂–µ –ø—Ä–æ–±–æ–≤–∞–ª–∏

---

## ‚úÖ –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ x-ui
```bash
systemctl restart x-ui
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
cat /usr/local/x-ui/bin/config.json | jq .
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ port–æ–≤
```bash
# –ö–∞–∫–∏–µ –ø–æ—Ä—Ç—ã —Å–ª—É—à–∞—é—Ç—Å—è
netstat -tlnp | grep xray

# –ò–ª–∏ —Å –ø–æ–º–æ—â—å—é ss
ss -tlnp | grep xray
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
```bash
# –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –¥–æ —Ñ–∏–Ω—Å–∫–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
traceroute 91.103.140.9
```

### –¢–µ—Å—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
```bash
# TCP —Ç–µ—Å—Ç
nc -zv 91.103.140.9 443

# –ò–ª–∏ telnet
telnet 91.103.140.9 443
```
