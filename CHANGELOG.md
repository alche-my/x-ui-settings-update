# Changelog - ByeDPI + 3x-ui Integration

## Version 2.0 (2025-12-26) - STABLE

### üéâ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–∏–ª–∏

–ü–æ—Å–ª–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã—è–≤–ª–µ–Ω—ã –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã **–∫–ª—é—á–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã** –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ ByeDPI —Å 3x-ui:

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ #1: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ x-ui

### –ü—Ä–æ–±–ª–µ–º–∞
–ö–ª–∏–µ–Ω—Ç—ã –Ω–µ –º–æ–≥–ª–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É (ping -1 ms), –¥–∞–∂–µ –∫–æ–≥–¥–∞ –ø–æ—Ä—Ç—ã –±—ã–ª–∏ –æ—Ç–∫—Ä—ã—Ç—ã.

### –ü—Ä–∏—á–∏–Ω–∞
–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Xray –≤ –ø–∞–Ω–µ–ª–∏ 3x-ui, –∏–∑–º–µ–Ω–µ–Ω–∏—è **–Ω–µ –ø—Ä–∏–º–µ–Ω—è–ª–∏—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**. –¢—Ä–µ–±–æ–≤–∞–ª—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ systemd.

### –†–µ—à–µ–Ω–∏–µ
```bash
sudo systemctl restart x-ui
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –≤—Å–µ –ø–æ—Ä—Ç—ã —Å—Ç–∞–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –∏ –∫–ª–∏–µ–Ω—Ç—ã —Å–º–æ–≥–ª–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è.

**–í —Å–∫—Ä–∏–ø—Ç–µ**: –î–æ–±–∞–≤–ª–µ–Ω–æ —è–≤–Ω–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ x-ui –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ #2: gRPC + dialerProxy –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `sockopt.dialerProxy` —Å gRPC —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

### –ò—Å—Ç–æ—á–Ω–∏–∫
GitHub Issue [XTLS/Xray-core#2232](https://github.com/XTLS/Xray-core/issues/2232):
> "gRPC transport cannot be proxied through dialerProxy due to transport layer limitations"

### –†–µ—à–µ–Ω–∏–µ
**–î–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
```json
{
  "protocol": "vless",
  "settings": {
    "address": "45.12.135.9",
    "port": 9443,
    "id": "uuid...",
    "encryption": "none"
  },
  "streamSettings": {
    "network": "grpc",
    "sockopt": {
      "dialerProxy": "byedpi-socks"  // ‚ùå –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç —Å gRPC
    }
  }
}
```

**–ü–æ—Å–ª–µ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
```json
{
  "protocol": "vless",
  "settings": {
    "vnext": [
      {
        "address": "45.12.135.9",
        "port": 9443,
        "users": [
          {
            "id": "uuid...",
            "encryption": "none"
          }
        ]
      }
    ]
  },
  "proxySettings": {
    "tag": "byedpi-socks",
    "transportLayer": true  // ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å gRPC
  },
  "streamSettings": {
    "network": "grpc"
  }
}
```

**–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `settings`: –≤–º–µ—Å—Ç–æ –ø—Ä—è–º—ã—Ö –ø–æ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `vnext` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç Xray)
2. –ó–∞–º–µ–Ω–∞ `sockopt.dialerProxy` ‚Üí `proxySettings` —Å `transportLayer: true`
3. `proxySettings` —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ **—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–º —É—Ä–æ–≤–Ω–µ**, —á—Ç–æ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å gRPC

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: gRPC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–æ–∫—Å–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ ByeDPI.

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ #3: ByeDPI –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ª–æ–º–∞—é—Ç Reality

### –ü—Ä–æ–±–ª–µ–º–∞
ByeDPI —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `--tlsrec` **—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä—É–µ—Ç TLS –∑–∞–ø–∏—Å–∏**, —á—Ç–æ –Ω–∞—Ä—É—à–∞–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π handshake –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ Reality.

### –ò—Å—Ç–æ—á–Ω–∏–∫
GitHub Discussion [hufrea/byedpi#195](https://github.com/hufrea/byedpi/discussions/195):
> "TLS record fragmentation (--tlsrec) interferes with Reality's custom TLS handshake and authentication"

### –†–µ—à–µ–Ω–∏–µ
**–î–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
```bash
ExecStart=/usr/local/bin/ciadpi --ip 127.0.0.1 --port 1080 \
  --disorder 1 --split 2 --tlsrec 1+s --auto=torst
```

**–ü–æ—Å–ª–µ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
```bash
ExecStart=/usr/local/bin/ciadpi --ip 127.0.0.1 --port 1080 \
  --oob 1 --disorder 1 --auto=torst
```

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–∏:**
- ‚ùå –£–±—Ä–∞–ª–∏ `--tlsrec 1+s` (–ª–æ–º–∞–µ—Ç Reality handshake)
- ‚ùå –£–±—Ä–∞–ª–∏ `--split 2` (–º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–µ–π)
- ‚úÖ –î–æ–±–∞–≤–∏–ª–∏ `--oob 1` (Out-Of-Band data, –±–æ–ª–µ–µ –º—è–≥–∫–∏–π –º–µ—Ç–æ–¥ –æ–±—Ö–æ–¥–∞ DPI)
- ‚úÖ –û—Å—Ç–∞–≤–∏–ª–∏ `--disorder 1` (–∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞ –ø–∞–∫–µ—Ç–æ–≤)
- ‚úÖ –û—Å—Ç–∞–≤–∏–ª–∏ `--auto=torst` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞)

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ByeDPI –æ–±—Ö–æ–¥–∏—Ç DPI –±–µ–∑ –Ω–∞—Ä—É—à–µ–Ω–∏—è Reality –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π

| –ü–∞—Ä–∞–º–µ—Ç—Ä | v1.0 (—Å—Ç–∞—Ä–∞—è) | v2.0 (—Ç–µ–∫—É—â–∞—è) |
|----------|---------------|----------------|
| **gRPC —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** | ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (dialerProxy) | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (proxySettings) |
| **Reality —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** | ‚ùå –õ–æ–º–∞–µ—Ç—Å—è (--tlsrec) | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (--oob) |
| **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ settings** | ‚ùå –ù–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è | ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è (vnext) |
| **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ x-ui** | ‚ö†Ô∏è –ù–µ —É–∫–∞–∑–∞–Ω | ‚úÖ –Ø–≤–Ω–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ |
| **–ü–∞—Ä—Å–∏–Ω–≥ vless://** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| **–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |

---

## üöÄ –ß—Ç–æ –Ω–æ–≤–æ–≥–æ –≤ v2.0

### –ù–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
1. **diagnose-connection-issue.sh** - –ø–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
2. **fix-client-connection.sh** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

### –ù–æ–≤–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
1. **TROUBLESHOOT-CONNECTION.md** - –ø–æ–¥—Ä–æ–±–Ω—ã–π –≥–∞–π–¥ –ø–æ —Ä–µ—à–µ–Ω–∏—é –ø—Ä–æ–±–ª–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
2. **CHANGELOG.md** - –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π (—ç—Ç–æ—Ç —Ñ–∞–π–ª)

### –£–ª—É—á—à–µ–Ω–∏—è install-byedpi-3xui.sh
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `proxySettings` –≤–º–µ—Å—Ç–æ `sockopt.dialerProxy`
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `settings.vnext` –¥–ª—è vless
- ‚úÖ ByeDPI –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Å Reality
- ‚úÖ –Ø–≤–Ω–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ x-ui

---

## üìù –ú–∏–≥—Ä–∞—Ü–∏—è —Å v1.0 –Ω–∞ v2.0

–ï—Å–ª–∏ –≤—ã —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é —Å–∫—Ä–∏–ø—Ç–∞:

### –®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç–µ ByeDPI –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

```bash
sudo systemctl stop byedpi
sudo nano /etc/systemd/system/byedpi.service
```

–ó–∞–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫—É `ExecStart` –Ω–∞:
```
ExecStart=/usr/local/bin/ciadpi --ip 127.0.0.1 --port 1080 --oob 1 --disorder 1 --auto=torst
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
sudo systemctl daemon-reload
sudo systemctl restart byedpi
```

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Xray

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é —Å–∫—Ä–∏–ø—Ç–∞:
```bash
curl -fsSL https://raw.githubusercontent.com/alche-my/x-ui-settings-update/claude/byedpi-3xui-compatibility-ihDW2/install-byedpi-3xui.sh -o install.sh && chmod +x install.sh && sudo ./install.sh
```

2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π JSON –≤ –ø–∞–Ω–µ–ª—å x-ui

3. **–í–ê–ñ–ù–û**: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ x-ui:
```bash
sudo systemctl restart x-ui
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ ByeDPI
sudo systemctl status byedpi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
sudo ss -tlnp | grep -E ':(8443|8080|7443)'

# –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞
# –û—Ç–∫—Ä–æ–π—Ç–µ –∫–ª–∏–µ–Ω—Ç –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è
```

---

## üîß –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–ª–∏–µ–Ω—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç -1 ms

**–†–µ—à–µ–Ω–∏–µ**: –ó–∞–ø—É—Å—Ç–∏—Ç–µ `fix-client-connection.sh`:
```bash
curl -fsSL https://raw.githubusercontent.com/alche-my/x-ui-settings-update/claude/byedpi-3xui-compatibility-ihDW2/fix-client-connection.sh | sudo bash
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç—ã –Ω–µ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ**: Inbound –Ω–µ –≤–∫–ª—é—á–µ–Ω –≤ –ø–∞–Ω–µ–ª–∏ x-ui. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–Ω–µ–ª—å –∏ –≤–∫–ª—é—á–∏—Ç–µ –Ω—É–∂–Ω—ã–µ inbound.

### –ü—Ä–æ–±–ª–µ–º–∞: gRPC –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ ByeDPI

**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `proxySettings` —Å `transportLayer: true`, –∞ –Ω–µ `sockopt.dialerProxy`.

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [QUICKSTART.md](QUICKSTART.md) - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- [TROUBLESHOOT-CONNECTION.md](TROUBLESHOOT-CONNECTION.md) - –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- [README-BYEDPI-SETUP.md](README-BYEDPI-SETUP.md) - –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üí° –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–≠—Ç–∞ –≤–µ—Ä—Å–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –æ–ø—ã—Ç–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º –≤ production –æ–∫—Ä—É–∂–µ–Ω–∏–∏.

**–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞:**
- Ubuntu 20.04/22.04
- 3x-ui latest version
- Xray-core 25.10.15
- ByeDPI latest (2025)

**–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏:**
- [XTLS/Xray-core](https://github.com/XTLS/Xray-core) - –∑–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ issue tracker
- [hufrea/byedpi](https://github.com/hufrea/byedpi) - –∑–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ–±—Ö–æ–¥–∞ DPI
- –°–æ–æ–±—â–µ—Å—Ç–≤—É –∑–∞ —Ä–µ–ø–æ—Ä—Ç—ã –ø—Ä–æ–±–ª–µ–º

---

**–í–µ—Ä—Å–∏—è**: 2.0
**–î–∞—Ç–∞**: 2025-12-26
**–°—Ç–∞—Ç—É—Å**: ‚úÖ STABLE (–ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ production)
