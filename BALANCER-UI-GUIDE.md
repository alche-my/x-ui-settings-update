# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–ª–∞–Ω—Å–µ—Ä–∞ —á–µ—Ä–µ–∑ 3x-ui –ø–∞–Ω–µ–ª—å (UI)

## ‚ö†Ô∏è –í–∞–∂–Ω–æ: –ë–∞–ª–∞–Ω—Å–µ—Ä —Å ByeDPI –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –¢–û–õ–¨–ö–û —á–µ—Ä–µ–∑ JSON!

**–ü—Ä–æ–±–ª–µ–º–∞:** 3x-ui UI **–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç** –Ω–∞—Å—Ç—Ä–æ–π–∫—É `proxySettings` –¥–ª—è outbound-–æ–≤.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ JSON —Ä–µ–¥–∞–∫—Ç–æ—Ä –≤ –ø–∞–Ω–µ–ª–∏ (Xray Config).

### –ü–æ—á–µ–º—É —Ç–æ–ª—å–∫–æ JSON?

- ‚úÖ `proxySettings` - —ç—Ç–æ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è Xray
- ‚ùå 3x-ui UI –ø–æ–∫–∞ –Ω–µ –∏–º–µ–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è —ç—Ç–æ–π –æ–ø—Ü–∏–∏
- ‚úÖ –ù–æ –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å JSON –Ω–∞–ø—Ä—è–º—É—é –≤ –ø–∞–Ω–µ–ª–∏

### –í—Ä–µ–º—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: ‚è±Ô∏è **5 –º–∏–Ω—É—Ç** (—á–µ—Ä–µ–∑ JSON)

---

## üìã –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ JSON –≤ –ø–∞–Ω–µ–ª–∏ 3x-ui

### –®–∞–≥ 1: –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥

```bash
./generate-balancer-config.sh
```

–°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç `/root/byedpi-config/xray-balancer-config.json`

### –®–∞–≥ 2: –û—Ç–∫—Ä–æ–π—Ç–µ 3x-ui –ø–∞–Ω–µ–ª—å

```
http://–≤–∞—à-ru-—Å–µ—Ä–≤–µ—Ä:–ø–æ—Ä—Ç-3x-ui
```

### –®–∞–≥ 3: –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Xray Config

–í –º–µ–Ω—é:
- **Panel Settings** ‚Üí **Xray Configs**
- –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ **Config** (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–µ—Ä—Å–∏–∏)

### –®–∞–≥ 4: –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é "outbounds"

–í—ã —É–≤–∏–¥–∏—Ç–µ —á—Ç–æ-—Ç–æ —Ç–∏–ø–∞:
```json
{
  "log": {...},
  "inbounds": [...],
  "outbounds": [
    {
      "tag": "direct",
      "protocol": "freedom"
    },
    {
      "tag": "blocked",
      "protocol": "blackhole"
    }
  ],
  "routing": {...}
}
```

### –®–∞–≥ 5: –ó–∞–º–µ–Ω–∏—Ç–µ outbounds

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–µ–∫—Ü–∏—é `"outbounds": [...]` –∏–∑ –≤–∞—à–µ–≥–æ —Ñ–∞–π–ª–∞:

```bash
cat /root/byedpi-config/xray-balancer-config.json
```

–ò **–∑–∞–º–µ–Ω–∏—Ç–µ** –º–∞—Å—Å–∏–≤ outbounds –≤ UI.

### –®–∞–≥ 6: –î–æ–±–∞–≤—å—Ç–µ —Å–µ–∫—Ü–∏—é routing

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–µ–∫—Ü–∏—é `"routing": {...}` –∏–∑ —Ñ–∞–π–ª–∞ –∏ –∑–∞–º–µ–Ω–∏—Ç–µ –≤ UI.

### –®–∞–≥ 7: –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ

- –ù–∞–∂–º–∏—Ç–µ **Save Config**
- –ù–∞–∂–º–∏—Ç–µ **Restart Xray** (–∏–ª–∏ `sudo systemctl restart x-ui`)

---

## üö´ –ü–æ—á–µ–º—É –Ω–µ–ª—å–∑—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —á–µ—Ä–µ–∑ UI –∫–Ω–æ–ø–∫–∏?

### –ß—Ç–æ –µ—Å—Ç—å –≤ 3x-ui UI:

‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ Inbound (–¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤)
‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö Outbound (VLESS, VMess, Shadowsocks)
‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–æ—É—Ç–∏–Ω–≥–∞ (–±–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞)
‚ùå **Proxy Settings –¥–ª—è outbound** (–Ω–µ—Ç –≤ UI!)
‚ùå **–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∏** (—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ JSON)

### –ß—Ç–æ –≤—ã —É–≤–∏–¥–∏—Ç–µ –≤ Advanced Settings outbound:

- ‚úÖ Reverse Proxy (—ç—Ç–æ –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π)
- ‚ùå **–ù–ï–¢** "Proxy Settings" –¥–ª—è –∏—Å—Ö–æ–¥—è—â–∏—Ö —á–µ—Ä–µ–∑ SOCKS5

**–í—ã–≤–æ–¥:** `proxySettings` –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é –≤ JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

---

## üìù –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π)

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ JSON —Ä–µ–¥–∞–∫—Ç–æ—Ä

1. –û—Ç–∫—Ä–æ–π—Ç–µ 3x-ui –ø–∞–Ω–µ–ª—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –º–µ–Ω—é ‚Üí **Xray Configs** (–∏–ª–∏ **Panel Settings** ‚Üí **Xray Configs**)
3. –í—ã —É–≤–∏–¥–∏—Ç–µ –±–æ–ª—å—à–æ–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ —Å JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

### –®–∞–≥ 2: –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç

```bash
./generate-balancer-config.sh
```

–°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç `/root/byedpi-config/xray-balancer-config.json`

### –®–∞–≥ 3: –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥

```bash
cat /root/byedpi-config/xray-balancer-config.json
```

### –®–∞–≥ 4: –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ JSON –≤ –ø–∞–Ω–µ–ª–∏

–í JSON —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ 3x-ui –≤—ã —É–≤–∏–¥–∏—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

```json
{
  "log": {...},
  "inbounds": [...],
  "outbounds": [
    {
      "tag": "direct",
      "protocol": "freedom"
    }
  ],
  "routing": {...}
}
```

**–ó–∞–º–µ–Ω–∏—Ç–µ:**
1. –ú–∞—Å—Å–∏–≤ `"outbounds": [...]` –Ω–∞ –≤–∞—à –∏–∑ —Ñ–∞–π–ª–∞
2. –°–µ–∫—Ü–∏—é `"routing": {...}` –Ω–∞ –≤–∞—à—É –∏–∑ —Ñ–∞–π–ª–∞

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ JSON

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ:
- ‚úÖ –í—Å–µ —Å–∫–æ–±–∫–∏ –Ω–∞ –º–µ—Å—Ç–µ `{ }` –∏ `[ ]`
- ‚úÖ –ó–∞–ø—è—Ç—ã–µ –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏
- ‚úÖ –ù–µ—Ç –ª–∏—à–Ω–∏—Ö –∑–∞–ø—è—Ç—ã—Ö –≤ –∫–æ–Ω—Ü–µ –º–∞—Å—Å–∏–≤–æ–≤

–ü–∞–Ω–µ–ª—å –æ–±—ã—á–Ω–æ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –≤ JSON.

### –®–∞–≥ 6: –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ

1. –ù–∞–∂–º–∏—Ç–µ **Save Config** (–∏–ª–∏ **Save**)
2. –ù–∞–∂–º–∏—Ç–µ **Restart Xray** (–∏–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª)

```bash
sudo systemctl restart x-ui
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ UI

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Outbounds

**Outbounds** ‚Üí –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã:
- ‚úÖ `byedpi-socks` (SOCKS, 127.0.0.1:1080)
- ‚úÖ `non-ru-1-via-byedpi` (VLESS, —Å Proxy Settings)
- ‚úÖ `non-ru-2-via-byedpi` (VLESS, —Å Proxy Settings)
- ‚úÖ `non-ru-3-via-byedpi` (VLESS, —Å Proxy Settings)

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Routing

**Routing Rules** ‚Üí –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª–æ:
- ‚úÖ Balancer Tag: `balancer`
- ‚úÖ Network: tcp,udp

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏

**Logs** ‚Üí –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –∑–∞–ø–∏—Å–∏ –æ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–µ

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### 1. Proxy Settings –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã!

–î–ª—è –∫–∞–∂–¥–æ–≥–æ Non-RU outbound **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** –≤–∫–ª—é—á–∏—Ç–µ Proxy Settings:
```
Proxy Tag: byedpi-socks
```

–ë–µ–∑ —ç—Ç–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫ –ø–æ–π–¥–µ—Ç –Ω–∞–ø—Ä—è–º—É—é (–±–µ–∑ ByeDPI) –∏ –±—É–¥–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω DPI!

### 2. Selector –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–µ–≥–∏

–í –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–µ —É–∫–∞–∂–∏—Ç–µ —Ç–æ—á–Ω—ã–µ —Ç–µ–≥–∏ outbound-–æ–≤:
```json
"selector": [
  "non-ru-1-via-byedpi",  // –î–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å Tag outbound
  "non-ru-2-via-byedpi",
  "non-ru-3-via-byedpi"
]
```

### 3. –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏

–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:
- `random` - —Å–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- `leastPing` - –Ω–∞–∏–º–µ–Ω—å—à–∏–π –ø–∏–Ω–≥ (—Ç—Ä–µ–±—É–µ—Ç Xray 1.8.0+)
- `leastLoad` - –Ω–∞–∏–º–µ–Ω—å—à–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥–∞ –≤—ã —É–≤–∏–¥–∏—Ç–µ –≤ JSON:

```json
{
  "outbounds": [
    {
      "tag": "byedpi-socks",
      "protocol": "socks",
      "settings": {
        "servers": [{"address": "127.0.0.1", "port": 1080}]
      }
    },
    {
      "tag": "non-ru-1-via-byedpi",
      "protocol": "vless",
      "settings": {...},
      "streamSettings": {...},
      "proxySettings": {
        "tag": "byedpi-socks"    ‚Üê –≠—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –¢–û–õ–¨–ö–û –≤ JSON!
      }
    }
  ]
}
```

**proxySettings** - —ç—Ç–æ –∫–ª—é—á–µ–≤–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ—Ç –≤ UI!

---

## üîß –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

### –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥ —á–µ—Ä–µ–∑ JSON:
   - **Panel Settings** ‚Üí **Xray Configs**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `balancers` –∏ `rules` –Ω–∞ –º–µ—Å—Ç–µ

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
   ```bash
   sudo journalctl -u x-ui -f | grep -i balanc
   ```

3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Xray:
   ```bash
   sudo systemctl restart x-ui
   ```

### UI –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –±–∞–ª–∞–Ω—Å–µ—Ä

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ 3x-ui –Ω–µ –∏–º–µ—é—Ç UI –¥–ª—è –±–∞–ª–∞–Ω—Å–µ—Ä–∞.
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ JSON (–°–ø–æ—Å–æ–± 1)

### –ù–µ –º–æ–≥—É –Ω–∞–π—Ç–∏ Proxy Settings –≤ UI

**–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!** 3x-ui UI –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `proxySettings`.

**–†–µ—à–µ–Ω–∏–µ:** –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ —á–µ—Ä–µ–∑ JSON –≤ Xray Config.

### JSON –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è / –û—à–∏–±–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ —Å–∫–æ–±–∫–∏ `{ }` –∏ `[ ]`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–ø—è—Ç—ã–µ –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏
- –£–±–µ—Ä–∏—Ç–µ –∑–∞–ø—è—Ç—É—é –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –º–∞—Å—Å–∏–≤–µ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ JSON –≤–∞–ª–∏–¥–∞—Ç–æ—Ä: https://jsonlint.com/

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- **Xray Documentation:** https://xtls.github.io/config/routing.html#balancerobject
- **3x-ui GitHub:** https://github.com/MHSanaei/3x-ui
- **–ù–∞—à README:** `README-balancer.md`

---

## ‚úÖ –ò—Ç–æ–≥–æ

**–ë–∞–ª–∞–Ω—Å–µ—Ä —Å ByeDPI –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ JSON —Ä–µ–¥–∞–∫—Ç–æ—Ä –≤ –ø–∞–Ω–µ–ª–∏ 3x-ui**

–®–∞–≥–∏:
1. –ó–∞–ø—É—Å—Ç–∏ `./generate-balancer-config.sh`
2. –û—Ç–∫—Ä–æ–π 3x-ui ‚Üí Xray Configs
3. –°–∫–æ–ø–∏—Ä—É–π –∏ –≤—Å—Ç–∞–≤—å JSON –∏–∑ `/root/byedpi-config/xray-balancer-config.json`
4. Save ‚Üí Restart
5. –ì–æ—Ç–æ–≤–æ!

**–í—Ä–µ–º–µ–Ω–∏:** 5 –º–∏–Ω—É—Ç ‚è±Ô∏è

---

## üéØ –ü–æ—á–µ–º—É —Ç–∞–∫?

- `proxySettings` - –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è Xray
- 3x-ui UI (–ø–æ–∫–∞) –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –µ—ë –≤ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
- –ù–æ JSON —Ä–µ–¥–∞–∫—Ç–æ—Ä –≤ –ø–∞–Ω–µ–ª–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤—Å—ë —á—Ç–æ —É–≥–æ–¥–Ω–æ!

–≠—Ç–æ –Ω–µ —Å–ª–æ–∂–Ω–µ–µ —á–µ–º UI - –ø—Ä–æ—Å—Ç–æ copy-paste –≥–æ—Ç–æ–≤–æ–≥–æ –∫–æ–Ω—Ñ–∏–≥–∞ üòä
